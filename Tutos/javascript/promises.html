<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Promises Javascript</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>

  <script type="text/javascript">
    var promise = new Promise(function(resolve, reject) {

      // We call resolve(...) when what we were doing asynchronously was successful, and reject(...) when it failed.
      // In reality, you will probably be using something like XHR or an HTML5 API.

      var data = "123";

      if (data) {
        resolve("Success!");
      } else {
        reject("Error");
      }

    });

    promise.then(function(successMessage) {
      // successMessage is whatever we passed in the resolve(...) function above.
      // It doesn't have to be a string, but if it is only a succeed message, it probably will be.
      console.log(successMessage);
      return successMessage; //be sure to return something if you want to add multiple .then
    }).catch(function(errorMessage) {
      // errorMessage is whatever we passed in the reject(...) function above.
      console.log(errorMessage);
    });



    // AJAX inside a JavaScript Promise
    var x;
    var promise = new Promise(function(resolve, reject) {
      $.ajax({
        url: 'https://swapi.co/api/films/1/',
        type: 'GET',
        dataType: 'json',
        //To sent to the server you use "data:""
        success: function(data, textStatus, xhr) {
          console.log(data.title);
          alert("Status: " + textStatus + " , " + xhr.status);
        },
        error: function(xhr, textStatus, error) {
          alert("Status: " + textStatus + " , " + xhr.status);
        }
        /*function(data) {
          if (data > 0) {
            resolve(true);
          } else {
            reject(false);
          }
        }*/
      });
    });
  </script>
</body>

</html>